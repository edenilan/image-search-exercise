<div class="header">
  <div class="api-key-container">
    <debounced-input (value)="onTokenInput($event)"
                     [placeholder]="'what\'s your api key?'">
    </debounced-input>
  </div>

  <div class="search-container">
    <input type="text" [placeholder]="'what are looking for?'" #searchInput
           (input)="searchInputChanged()" [matAutocomplete]="auto">
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="searchInputChanged()">
      @for (suggestion of autocompleteSuggestions(); track suggestion) {
        <mat-option [value]="suggestion">{{suggestion}}</mat-option>
      }
    </mat-autocomplete>
  </div>
</div>

<div class="results-container">
  @if (isEmptyState()) {
    <h2 class="empty-state-message">Nope, try again</h2>
  }
  <cdk-virtual-scroll-viewport itemSize="100" class="example-viewport">
    <div *cdkVirtualFor="let result of dataSourceService" class="image-thumbnail-container">
      <div (click)="resultClicked(result)">
        <img [src]="result.previewURL">
        @if (result.annotations != null && result.annotations.length > 0) {
          <span class="has-annotation-indicator">âœŽ annotated</span>
        }
      </div>
    </div>
  </cdk-virtual-scroll-viewport>
</div>
